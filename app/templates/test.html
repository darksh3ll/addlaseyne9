<section class="my-10" x-data="{ open: false, imageUrl: '' }">
	<h2 class="carousel-3D-swiper-title text-3xl font-bold text-center text-gray-800 dark:text-white mb-6">
		Nos Rendez-vous : Horaires & Événements
	</h2>

	<section class="carousel-3D-swiper-section max-w-6xl mx-auto">
		<div class="swiper carousel-3D-swiper">
			<div class="swiper-wrapper">
				{% for item in schedule %}
				<div class="swiper-slide">
					<div class="image-wrapper aspect-video rounded-xl overflow-hidden shadow-lg cursor-pointer"
						 @click="open = true; imageUrl = '{{ item.image.url }}'">
						<img class="aspect-video w-full h-auto object-cover" src="{{ item.image.url }}" alt="Événement {{ forloop.counter }}">
					</div>
					<div class="details mt-2 text-center">
						<h3 class="text-lg font-semibold text-gray-700 dark:text-white">Titre {{ forloop.counter }}</h3>
						<span class="text-sm text-gray-500 dark:text-gray-300">Événement</span>
					</div>
				</div>
				{% endfor %}
			</div>

			<!-- Pagination et navigation -->
			<div class="swiper-button-prev"></div>
			<div class="swiper-button-next"></div>
			<div class="swiper-pagination" style="bottom: -40px;"></div>
		</div>
	</section>

	<!-- Lightbox Alpine -->
	<div class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 transition-opacity duration-300"
		 x-show="open" x-transition>
		<div class="relative max-w-[90%] max-h-[90%]">
			<button class="absolute top-2 right-2 text-white text-4xl font-bold hover:text-red-500"
					@click="open = false">&times;</button>
			<img :src="imageUrl" alt="Image agrandie" class="max-w-full max-h-full rounded-xl shadow-2xl border-4 border-white" />
		</div>
	</div>
</section>
<style>
    .carousel-3D-swiper-section {
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 14px;
        color: #000;
        margin: 0;
        padding: 0;
        max-width: 1200px;
        margin: auto;
        overflow: hidden;
        min-height: 500px;
    }
    
    .carousel-3D-swiper-title {
        text-align: center;
        font-size: 3rem;
        color: orangered;
    }
    
    .carousel-3D-swiper .swiper-slide {
        position: relative;
    }
    
    .carousel-3D-swiper .image-wrapper {
        overflow: hidden;
        //@apply aspect-video;
        max-height: 225px;
    }
    
    .carousel-3D-swiper .image-wrapper img {
        display: block;
        width: 100%;
        height: 100%;
        max-height: 225px;
        -o-object-fit: cover;
        object-fit: cover;
        border-radius: 8px;
        -webkit-box-reflect: below 5px -webkit-linear-gradient(bottom, rgba( 255, 0, 0,	0.1 ) 0%, transparent 32px, transparent 100%);
    }
    
    .details {
        padding: 25px 20px;
        font-weight: 600;
        text-align: center;
        background-color: #fff;
    }
    
    .details span {
        display: block;
        font-size: 16px;
        color: #f44336;
    }
    
    .details h3 {
        margin: 0;
        font-weight: bold;
        font-size: 24px;
        line-height: 1.1;
    }
    
    .details p {
        margin: 8px 0 0;
        opacity: 0.65;
        font-size: 14px;
        font-weight: 500;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
        overflow: hidden;
    }
    
    .carousel-3D-swiper-section .swiper-pagination-bullet {
        margin: 0 4px;
      width: 16px;
      height: 16px;
        z-index: 50;
    }
    
    .carousel-3D-swiper-section .swiper-pagination-bullet-active {
        opacity: 1;
        background: orange;
    }
    
</style>
<script>
    const carousel3Dswiper = new Swiper(".carousel-3D-swiper", {
        loop: true,
        effect: "coverflow",
        grabCursor: true,
        centeredSlides: true,
        slidesPerView: 3,
        coverflowEffect: {
          rotate: 0,
          stretch: 0,
          depth: 350,
          modifier: 1,
          slideShadows: true
        },
             navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },
        pagination: {
          el: ".swiper-pagination"
        }
      });
</script>