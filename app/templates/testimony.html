{% load static %}

<section class="py-16 bg-gray-100" id="testimonies">
  <div class="max-w-screen-xl mx-auto px-4">

    <!-- Titre -->
    <div class="mx-auto max-w-7xl sm:px-6 lg:px-8">
      <div class="relative isolate overflow-hidden bg-white px-6 py-20 text-center sm:px-16 sm:shadow-sm">
        <div class="text-center mb-12">
          <h2 class="text-4xl font-bold text-gray-800">Transformés par la grâce</h2>
          <p class="mt-2 text-lg text-gray-600">
            Ils ont traversé des épreuves, rencontré Dieu, et partagé ce qu’Il a fait dans leur vie.
            Lisez ces récits vrais, puissants et porteurs d’espérance.
          </p>
        </div>

        <!-- Barre de recherche -->
        {% include "partials/testimony_search.html" %}

        <svg viewBox="0 0 1024 1024"
          class="absolute left-1/2 top-1/2 -z-10 h-[64rem] w-[64rem] -translate-x-1/2 [mask-image:radial-gradient(closest-side,white,transparent)]"
          aria-hidden="true">
          <circle cx="512" cy="512" r="512"
                  fill="url(#827591b1-ce8c-4110-b064-7cb85a0b1217)" fill-opacity="0.7"></circle>
          <defs>
            <radialGradient id="827591b1-ce8c-4110-b064-7cb85a0b1217">
              <stop stop-color="#3b82f6"></stop>
              <stop offset="1" stop-color="#1d4ed8"></stop>
            </radialGradient>
          </defs>
        </svg>
      </div>
    </div>

    <!-- Liste des témoignages -->
    <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3 mt-10">
      {% for t in testimonies %}
      <article class="neon-glow flex flex-col shadow-lg bg-white mx-auto max-w-[400px] min-h-[400px]">
        <div class="flex flex-col justify-between p-6 h-full">
          <div>
            <p class="text-blue-700 text-sm font-bold uppercase pb-2">{{ t.category.name }}</p>
            <h3 class="text-2xl font-bold text-gray-800 hover:text-gray-700 pb-2 line-clamp-2">{{ t.title }}</h3>
            <p class="text-sm text-gray-500 pb-3">Par {{ t.author }}, publié le {{ t.published_date|date:"j F Y" }}</p>
            <p class="text-gray-700">{{ t.content|truncatechars:160|safe }}</p>
          </div>
       <a href="{% url 'testimony_detail' slug=t.slug %}" class="mt-6 uppercase text-gray-800 hover:text-black font-semibold">
  Lire le témoignage
</a>
        </div>
      </article>
      {% empty %}
      <p class="col-span-3 text-center text-gray-500">Aucun témoignage trouvé.</p>
      {% endfor %}
    </div>

  </div>
</section>

<style>
  .neon-glow {
    position: relative;
    z-index: 1;
  }
  .neon-glow::before {
    content: '';
    position: absolute;
    top: 10px;
    left: 10px;
    right: 10px;
    bottom: 10px;
    background: linear-gradient(45deg, rgba(255,0,255,0.3), rgba(0,255,255,0.3));
    filter: blur(30px);
    opacity: 0.6;
    z-index: -1;
    animation: pulse 3s infinite;
    border-radius: 1rem;
  }
  @keyframes pulse {
    0%, 100% { opacity: 0.4; }
    50% { opacity: 0.8; }
  }
</style>
